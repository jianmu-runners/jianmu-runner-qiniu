ref: qiniu
version: 1.0.1-file-upload
description: 修复了上传后的uri前缀为空时，在七牛云存储空间创建多余的未命名文件夹问题。
resultFile: /tmp/result_file
inputParameters:
  - ref: qiniu_bucket
    name: 七牛bucket
    type: STRING
    required: true
  - ref: qiniu_ak
    name: 七牛accessKey
    type: SECRET
    required: true
  - ref: qiniu_sk
    name: 七牛secretKey
    type: SECRET
    required: true
  - ref: qiniu_zone
    name: 七牛zone
    type: STRING
    value: ''
    description: 不设置时，自动识别，华东：z0；华北：z1；华南：z2；北美：na0；东南亚：as0
  - ref: qiniu_upload_uri_prefix
    name: 上传后的uri前缀
    type: STRING
    required: true
    description: 如，jianmu-ci-ui/1.0.0
  - ref: qiniu_upload_dir
    name: 要上传的目录
    type: STRING
    required: true
    description: 如，/tmp/jianmu-ci-ui/dist
outputParameters:
  - ref: qiniu_base_uri
    name: 上传后的根uri
    type: STRING
    required: true
    description: /jianmu-ci-ui/1.0.0
spec:
  image: jianmurunner/qiniu:1.0.0-file-upload
  cmd:
    - node
    - /app/scripts/upload.js
